<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>2048</title>
    <!--初始化,第一个数字生成,移动,第二个数字生成-->
</head>
<style>
    #main {
        width: 400px;
        height: 400px;
        background: #99CCFF;
        table-layout: fixed;
        border-spacing: 1px;
        border-collapse: separate;
    }

    #main tr {
        height: 25%;
    }

    #main td {
        border: 1px solid #fff;
    }

    #main td div {
        width: 100%;
        height: 100%;
        line-height: 94px;
        text-align: center;
        font-size: 35px;
        font-weight: bold;
    }

    .rank2 {
        color: #cac7c5;
    }

    .rank4 {
        color: #d2b19b;
    }

    .rank8 {
        color: #d2a384;
    }

    .rank16 {
        color: #d29369;
    }

    .rank32 {
        color: #d2804a;

    }

    .rank64 {
        color: #d07438;
    }

    .rank128 {
        color: #d0641e;
    }

    .rank256 {
        color: #cc5407
    }

    .rank512 {
        color: #c73806;
    }

    .rank1024 {
        color: #da3d07
    }

    .rank2048 {
        color: #f34104
    }
</style>
<body>
<table id="main">
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table>
</body>
<script>
    let arr = [
        [0,0,0,0],
        [0,0,0,0],
        [0,0,0,0],
        [0,0,0,0]
    ];
    let elementRow = document.querySelectorAll('#main tr');
    function getOne() {
        return (Math.random()-0.5)>0?2:4;
    }
    function addOne(){
        let result = [];
        for(let i=0;i<4;i++){
            for(let j=0;j<4;j++){
                if(!arr[i][j]){
                    result.push({i,j});
                }
            }
        }
        let {i,j} = result[(result.length*Math.random())|0];
        let fillNumber = getOne();
        arr[i][j] = fillNumber;
        let currentRow = elementRow[i].children;
        currentRow[j].innerHTML = `<div class="rank${fillNumber}">${fillNumber}</div>`;
    }
    function init() {
        addOne();//先添加一个
    }

    function operation() {
        let all = document.querySelectorAll('#main div');
        console.log(all)
    }
    document.addEventListener('keydown', function(e) {
        if (e && e.keyCode === 37) {
            //左
            operation()
        }
        if (e && e.keyCode === 38) {
            //上
        }

        if (e && e.keyCode === 39) {
            //右
        }
        if (e && e.keyCode === 40) {
            //下
        }
    }, false);

    init();
</script>
</html>